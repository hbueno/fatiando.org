<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta charset="utf-8"><meta name="description" content="Geophysical modeling and inversion"><meta name="author" content="Leonardo Uieda"><title>Blog | Fatiando a Terra</title><link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"><link href="../assets/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"><link href="../assets/css/rst.css" rel="stylesheet" type="text/css"><link href="../assets/css/code.css" rel="stylesheet" type="text/css"><link href="../assets/css/colorbox.css" rel="stylesheet" type="text/css"><link href="../assets/css/slides.css" rel="stylesheet" type="text/css"><link href="../assets/css/theme.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]--><link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../rss.xml"><link rel="icon" href="../favicon.ico" sizes="32x32"></head><body>
<!-- Menubar -->
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">

        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </a>

            <a class="brand" href="../">
            Fatiando a Terra
            </a>
            <!-- Everything you want hidden at 940px or less, place within here -->
            <div class="nav-collapse collapse">
                <ul class="nav"><li><a href="../blog">Blog</a>
            </li><li><a href="http://fatiando.readthedocs.org">Docs</a>
            </li><li><a href="../projects">Projects</a>
            </li><li><a href="../people">People</a>
            </li><li><a href="../contact">Contact</a>
            </li><li><a href="https://github.com/leouieda/fatiando"><img src="../logo/github.png" title="Source code on GitHub"></a>
            </li><li><a href="https://plus.google.com/109453117826543450682"><img src="../logo/gplus.png" title="Our Google+ page"></a>
            </li><li><a href="../rss.xml"><img src="../logo/rss.png" title="RSS feed"></a>

                </li></ul><ul class="nav pull-right"></ul></div>
        </div>
    </div>
</div>
<!-- End of Menubar -->
<div class="container-fluid" id="container-fluid">
    <!--Body content-->
    <div class="row-fluid">
    <div class="span2"></div>
    <div class="span8">
    
        <div class="postbox">
        <h1><a href="2013-02-21-tesseroid-calculations-in-fatiando.html">Tesseroid calculations in Fatiando</a>
        <small>  
             Posted: <time class="published" datetime="2013-02-21T14:36:43">2013-02-21 14:36</time></small></h1>
        <hr><img src="../logo/tesseroids-highres.png" style="float:left;
    padding-right:10px"><p>One of the open-source software projects
I have been working on
is called <a class="reference external" href="http://leouieda.github.com/tesseroids">Tesseroids</a>.</p>
<p>It is a collection of C programs
that calculate the gravitational fields
(e.g., gravitational potential, gravity anomaly, gradient tensor)
of a
<a class="reference external" href="http://tesseroids.readthedocs.org/en/latest/theory.html#what-is-a-tesseroid-anyway">tesseroid</a>.
This is all done in spherical coordinates
and can be used to model large regions
where one would like
to take the Earth's curvature
into consideration.</p>
<img alt="http://tesseroids.readthedocs.org/en/latest/_images/tesseroid.png" class="align-center" src="http://tesseroids.readthedocs.org/en/latest/_images/tesseroid.png" style="width: 300px;"><p>I'm proud of this software
because it was my first
real programming project.
I've been working on it
since my
<a class="reference external" href="http://www.mendeley.com/research/c%C3%A1lculo-tensor-gradiente-gravim%C3%A9trico-utilizando-tesser%C3%B3ides/">undergrad years</a>
and it has gone through
several refactorings.
The main problem with it, though,
is that it is written in C.
So it is very time consuming and tedious
to add new features to it.
One of the things that has been
on my TODO list for quite some time
is exporting to <a class="reference external" href="http://www.vtk.org/">VTK</a>.
This would enable 3D plotting with
<a class="reference external" href="http://www.paraview.org/">Paraview</a>
or <a class="reference external" href="http://code.enthought.com/projects/mayavi/">Mayavi</a>.
Another is adding parallel computations,
which would be a pain to do in a portable way in C.
But I never got around to actually start any of this.
Specially with my PhD in the way
and the much more pleasent experience
of programming in <a class="reference external" href="http://www.python.org/">Python</a> on
<a class="reference external" href="https://github.com/leouieda/fatiando">Fatiando a Terra</a>.</p>
<p>So last week I finally got around
to implementing tesseroid calculations and 3D plotting
on Fatiando!
You can check out the source code on the
<a class="reference external" href="https://github.com/leouieda/fatiando/tree/devel">devel branch on GitHub</a>.
Here is a little taste
of a 2 tesseroid model
and the resulting gravitational fields:</p>
<img alt="/images/added-tesseroids-fatiando-example-tesseroid.png" src="../images/added-tesseroids-fatiando-example-tesseroid.png"><img alt="/images/added-tesseroids-fatiando-example-tesseroid-grav.png" src="../images/added-tesseroids-fatiando-example-tesseroid-grav.png" style="width: 400px;"><p>There are 2 scripts on the
<a class="reference external" href="https://github.com/leouieda/fatiando/tree/devel/cookbook">cookbook</a>
that demonstrate the usage.
One even shows how to split a large model
and calculate in parallel using the
<a class="reference external" href="http://docs.python.org/2/library/multiprocessing.html">multiprocessing</a>
package.</p>
<script src="https://gist.github.com/leouieda/5006822.js"></script><p>This script generates a 40000 tesseroid model
of the crust,
plots it in Mayavi,
calculates the gravity anomaly
and plots that using a
<a class="reference external" href="http://matplotlib.org/basemap/users/ortho.html">orthographic projection</a>
(using the <a class="reference external" href="http://matplotlib.org/">matplotlib</a>
<a class="reference external" href="http://matplotlib.org/basemap/">Basemap toolkit</a>).</p>
<p>It's that easy!</p>
<p>---</p>
<p><a class="reference external" href="../people/uieda/index.html">Leonardo Uieda</a></p>
            
    <p>
        <a href="2013-02-21-tesseroid-calculations-in-fatiando.html#disqus_thread" data-disqus-identifier="cache/posts/2013-02-21-tesseroid-calculations-in-fatiando.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="first-publication/index.html">First publication</a>
        <small>  
             Posted: <time class="published" datetime="2012-06-28T16:52:00">2012-06-28 16:52</time></small></h1>
        <hr><p>
My first paper, 
"<strong><a href="http://dx.doi.org/10.1190/geo2011-0388.1">Robust 3D gravity gradient inversion by planting anomalous densities</a></strong>",
was finally published in the journal 
<em><a href="http://library.seg.org/geophysics">Geophysics</a></em>! 
There is a copy available in my 
<a href="first-publication/www.mendeley.com/profiles/leonardo-uieda/">Mendeley profile</a>.
</p>

<p>
It was an arduous review, with a complete rewrite of the methodology and 
source code, but it was well worth it. 
The end result looks much better and (in my opinion) is more readable. 
This is the result of my 
Master's dissertation at the 
<a href="http://www.on.br/">Observatório Nacional</a> in Brazil, 
where I'm currently doing my PhD. 
The title may sound funny (even for geophysicists) and that is a good thing 
because it was our intention! 
It is a pun on the method because we use elements called "seeds" 
(this one is 
<a href="http://link.aip.org/link/?GPY/51/988/1&amp;Agg=doi">not by us</a>) 
that grow into the final solution (an anomalous density).
</p>

<p>
Go see <a href="http://dx.doi.org/10.6084/m9.figshare.91469">an animation of 
the inversion process</a> on 
<a href="http://www.figshare.com/">figshare</a> 
because it explains the idea of the method much better than words!
</p>

<p>
This paper is about a method that 
<a href="http://fatiando.org/people/uieda/">me</a> and 
<a href="http://buscatextual.cnpq.br/buscatextual/visualizacv.do?metodo=apresentar&amp;id=K4793243Y4">my supervisor</a> 
developed for 3D <em>geophysical inversion</em>. 
Geophysical inversion is basically an estimation problem. 
We try to estimate the physical properties (density, shape, etc) 
of a geologic structure based on measured data 
(like the gravity field perturbation of the structure). 
This is problematic because it is an 
<a href="https://en.wikipedia.org/wiki/Well-posed_problem">ill-posed problem</a>, 
which means that there are an infinite number of solutions (non-unique) and, 
if there is a solution, it is unstable (very sensitive to noise in the data). 
The good about this is that it keeps me "employed" 
(as much as grad student can be)! 
The trick, then, is introducing more information into the inversion, 
be it geometric, geologic, or merely mathematical. 
So that is what we did, in a heuristic sort of way. 
Plus, we used a smart algorithm to save 
<strong>a lot</strong> of computation time and memory.
</p>

<p>
As is always the case in methodology research, 
I had to implement the <strong>software</strong> for doing all this. 
At the time I started this project (around October 2010) 
I was already working on an early version of 
<a href="https://github.com/leouieda/fatiando">Fatiando a Terra</a>. 
So naturally, I 
<a href="https://en.wikipedia.org/wiki/Fork_%28software_development%29">forked</a> 
the <a href="https://bitbucket.org/fatiando/fatiando-dev">Fatiando repository on Bitbucket</a> 
and started implementing the inversion algorithm as module 
(called <em>harvester</em>) 
of the <a href="http://fatiando.readthedocs.org/en/latest/api/fatiando.html">fatiando</a> 
package. 
The good thing about this is that every time I need some functionality, 
I would go and implement it on Fatiando and pull the changes back. 
So the Fatiando project grew a lot during this time 
and became much more useful. 
I also saw a lot of design flaws, 
which I later resolved, when I was making the scripts to obtain the 
results in the paper. 
Now that the paper is out, 
I've merged the changes back into Fatiando and they will 
be <strong>out soon in the v0.1 release</strong>! 
There is also a <strong>command line program</strong> 
that runs the inversion, 
if you don't want to get your hands dirty with 
<a href="http://www.python.org">Python</a> scripts. 
If you're curious, you can check out the 
<a href="https://bitbucket.org/fatiando/fatiando-dev/src">development source</a> 
and  also browse the 
<a href="http://fatiando.readthedocs.org/en/latest/api/gravmag.harvester.html">documentation</a>.
</p>

<p>
During the writing process, 
we had a lot of complaints that the paper was too big 
(it really was). 
So I decided to finally start using 
<a href="http://www.figshare.com/">figshare</a> and 
uploaded the figures and sections that I had to remove as 
<a href="http://dx.doi.org/10.6084/m9.figshare.91574">supplementary material</a> 
and also an 
<a href="http://dx.doi.org/10.6084/m9.figshare.91469">animation</a>! 
There is also a <a href="http://dx.doi.org/10.6084/m9.figshare.91511">poster</a> 
there that about this that I presented at the 
<a href="http://www.eage.org/events/index.php?eventid=408">2011 EAGE meeting</a> 
in Vienna. 
So many thanks to the figshare team 
(specially <a href="https://plus.google.com/u/0/113271696737383211339">Mark Hahnel</a>) 
for providing this great service that certainly made this paper better!
</p>

---
<br><a href="people/uieda/index.html">Leonardo Uieda</a>
            
    <p>
        <a href="first-publication/index.html#disqus_thread" data-disqus-identifier="cache/posts/first-publication.html">Comments</a>

        </p></div>
        <div class="postbox">
        <h1><a href="a-change-in-direction/index.html">A change in direction</a>
        <small>  
             Posted: <time class="published" datetime="2012-06-13T15:32:03">2012-06-13 15:32</time></small></h1>
        <hr><p>
For a while now we've been thinking of opening up the <em>fatiando.org</em> domain to more than just the <a href="http://www.python.org">Python</a> package <a title="Fatiando a Terra" href="http://fatiando.org/projects/">fatiando</a>.The idea was to include some other  open-source content, like <a title="Software" href="http://fatiando.org/projects/">other software</a> for geophysics, <a title="Content" href="http://fatiando.org/projects/">lecture notes</a>, slides, etc. All free and open source!
</p>

<p>
Last week, I decided to take the time to make these changes. I've made a lot of changes to the site (including a trying out a new <a href="http://www.wordpress.org">Wordpress</a> theme) to make it fit this new direction to the <em>Fatiando a Terra</em> project. We'll try to make the blog a place for discussion about new publications, crazy ideas, and the like. I'll be taking some baby steps toward this goal and see how things go from there.
</p>

<p>
I included under the Fatiando umbrella my other open-source project <a title="Tesseroids" href="http://leouieda.github.com/tesseroids">Tesseroids</a>, a software package for gravity modeling in spherical coordinates! The programs are command line and written in C. There is documentation (on <a href="http://tesseroids.readthedocs.org/">ReadTheDocs</a>) complete with instructions, theory, and even a cookbook! Version 1.1 of Tesseroids will be out soon and I'm working on a paper describing the software and some new things we've discovered using it. There will be a blog post about this once the paper is out (I promise)!
</p>

<p>
Our megalomaniac goal is still to model the whole Earth, but now the site might be useful to more people. Check it out and let us know what you think!
</p>

---
<br><a href="people/uieda/index.html">Leonardo Uieda</a>
            
    <p>
        <a href="a-change-in-direction/index.html#disqus_thread" data-disqus-identifier="cache/posts/a-change-in-direction.html">Comments</a>

        </p></div>
    
<div>
<ul class="pager"></ul></div>

    
       <script type="text/javascript">var disqus_shortname="fatiando";(function(){var a=document.createElement("script");a.async=true;a.type="text/javascript";a.src="http://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("HEAD")[0]||document.getElementsByTagName("BODY")[0]).appendChild(a)}());</script></div>
    </div>
    <!--End of body content-->
</div>
<div class="footerbox">
    <p style="padding-top:50px">Contents © 2013 <a href="../people/uieda">Leonardo Uieda</a> - Powered by <a href="http://nikola.ralsina.com.ar">Nikola</a> <br>  Except where otherwise noted, all content is avilable under a <a href="http://creativecommons.org/licenses/by/3.0/legalcode">CC-BY license</a>. <br><a href="http://creativecommons.org/licenses/by/3.0/legalcode"><img src="../logo/cc-by.jpg" width="90px" style="padding-top:5px"></a></p>
</div>



<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38125837-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><script src="../assets/js/jquery-1.7.2.min.js" type="text/javascript"></script><script src="../assets/js/bootstrap.min.js" type="text/javascript"></script><script src="../assets/js/jquery.colorbox-min.js" type="text/javascript"></script><script src="../assets/js/slides.min.jquery.js" type="text/javascript"></script><script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"80%",maxHeight:"80%",scalePhotos:true});</script></body></html>